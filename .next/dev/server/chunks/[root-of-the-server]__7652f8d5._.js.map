{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jayesh_naphade/.gemini/antigravity/scratch/ai_tutor_demo/app/api/transcript/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { YoutubeTranscript } from 'youtube-transcript';\r\n\r\nexport async function POST(req: Request) {\r\n    try {\r\n        const { url } = await req.json();\r\n\r\n        if (!url) {\r\n            return NextResponse.json({ error: 'URL is required' }, { status: 400 });\r\n        }\r\n\r\n        // Extract video ID from URL\r\n        const videoIdMatch = url.match(/(?:youtube\\.com\\/(?:[^\\/]+\\/.+\\/|(?:v|e(?:mbed)?)\\/|.*[?&]v=)|youtu\\.be\\/)([^\"&?\\/\\s]{11})/);\r\n        const videoId = videoIdMatch ? videoIdMatch[1] : null;\r\n\r\n        if (!videoId) {\r\n            return NextResponse.json({ error: 'Invalid YouTube URL' }, { status: 400 });\r\n        }\r\n\r\n        try {\r\n            const transcriptItems = await YoutubeTranscript.fetchTranscript(videoId);\r\n            const transcriptText = transcriptItems.map(item => item.text).join(' ');\r\n            return NextResponse.json({ transcript: transcriptText });\r\n        } catch (transcriptError) {\r\n            console.error('Transcript fetch error:', transcriptError);\r\n            return NextResponse.json({ error: 'Could not fetch transcript. The video might not have captions.' }, { status: 500 });\r\n        }\r\n\r\n    } catch (error) {\r\n        console.error('API error:', error);\r\n        return NextResponse.json({ error: 'Internal Server Error' }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,GAAY;IACnC,IAAI;QACA,MAAM,EAAE,GAAG,EAAE,GAAG,MAAM,IAAI,IAAI;QAE9B,IAAI,CAAC,KAAK;YACN,OAAO,uMAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAkB,GAAG;gBAAE,QAAQ;YAAI;QACzE;QAEA,4BAA4B;QAC5B,MAAM,eAAe,IAAI,KAAK,CAAC;QAC/B,MAAM,UAAU,eAAe,YAAY,CAAC,EAAE,GAAG;QAEjD,IAAI,CAAC,SAAS;YACV,OAAO,uMAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAsB,GAAG;gBAAE,QAAQ;YAAI;QAC7E;QAEA,IAAI;YACA,MAAM,kBAAkB,MAAM,2PAAiB,CAAC,eAAe,CAAC;YAChE,MAAM,iBAAiB,gBAAgB,GAAG,CAAC,CAAA,OAAQ,KAAK,IAAI,EAAE,IAAI,CAAC;YACnE,OAAO,uMAAY,CAAC,IAAI,CAAC;gBAAE,YAAY;YAAe;QAC1D,EAAE,OAAO,iBAAiB;YACtB,QAAQ,KAAK,CAAC,2BAA2B;YACzC,OAAO,uMAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAiE,GAAG;gBAAE,QAAQ;YAAI;QACxH;IAEJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,cAAc;QAC5B,OAAO,uMAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC/E;AACJ"}}]
}