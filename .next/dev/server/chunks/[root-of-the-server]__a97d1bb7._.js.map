{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 154, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jayesh_naphade/.gemini/antigravity/scratch/ai_tutor_demo/app/api/google-tts/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { TextToSpeechClient } from '@google-cloud/text-to-speech';\r\n\r\nexport async function POST(req: Request) {\r\n    try {\r\n        const { text } = await req.json();\r\n\r\n        if (!text) {\r\n            return NextResponse.json({ error: 'Text is required' }, { status: 400 });\r\n        }\r\n\r\n        console.log(`[Google Cloud TTS] Request received: \"${text.substring(0, 50)}...\"`);\r\n\r\n        // Initialize Google Cloud TTS client with service account\r\n        const client = new TextToSpeechClient({\r\n            keyFilename: \"C:\\\\Users\\\\jayesh_naphade\\\\Downloads\\\\jyoti-project-477506-882032744666.json\"\r\n        });\r\n\r\n        const startTime = Date.now();\r\n\r\n        // Configure the synthesis request\r\n        const request = {\r\n            input: { text: text },\r\n            voice: {\r\n                languageCode: 'en-IN', // Indian English\r\n                name: 'en-IN-Neural2-C', // Neural2-C voice as requested\r\n\r\n                // === WAVENET VOICES (High Quality) ===\r\n                // 'en-IN-Wavenet-A' - Female, clear\r\n                // 'en-IN-Wavenet-B' - Male, deep\r\n                // 'en-IN-Wavenet-C' - Male, warm ‚≠ê SELECTED\r\n                // 'en-IN-Wavenet-D' - Female, natural\r\n\r\n                // === NEURAL2 VOICES (Newest, Best Quality) ===\r\n                // 'en-IN-Neural2-A' - Female, very natural\r\n                // 'en-IN-Neural2-B' - Male, very natural\r\n                // 'en-IN-Neural2-C' - Female, expressive\r\n                // 'en-IN-Neural2-D' - Male, expressive\r\n            },\r\n            audioConfig: {\r\n                audioEncoding: 'MP3' as const,\r\n                speakingRate: 1.1, // Slightly faster for responsiveness\r\n                pitch: 0.0,\r\n                volumeGainDb: 0.0,\r\n            },\r\n        };\r\n\r\n        // Perform the text-to-speech request\r\n        const [response] = await client.synthesizeSpeech(request);\r\n        const endTime = Date.now();\r\n\r\n        console.log(`[Google Cloud TTS] Generation took ${endTime - startTime}ms`);\r\n\r\n        if (!response.audioContent) {\r\n            throw new Error(\"No audio content generated\");\r\n        }\r\n\r\n        // Convert audio content to base64\r\n        const audioBuffer = Buffer.from(response.audioContent as Uint8Array);\r\n        const base64Audio = audioBuffer.toString('base64');\r\n\r\n        console.log(`[Google Cloud TTS] Audio size: ${audioBuffer.length} bytes`);\r\n\r\n        return NextResponse.json({\r\n            audioContent: base64Audio,\r\n            mimeType: 'audio/mpeg'\r\n        });\r\n\r\n    } catch (error: any) {\r\n        console.error('[Google Cloud TTS] Error:', error);\r\n        return NextResponse.json({\r\n            error: 'TTS Failed',\r\n            details: error.message\r\n        }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,GAAY;IACnC,IAAI;QACA,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,IAAI;QAE/B,IAAI,CAAC,MAAM;YACP,OAAO,uMAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAmB,GAAG;gBAAE,QAAQ;YAAI;QAC1E;QAEA,QAAQ,GAAG,CAAC,CAAC,sCAAsC,EAAE,KAAK,SAAS,CAAC,GAAG,IAAI,IAAI,CAAC;QAEhF,0DAA0D;QAC1D,MAAM,SAAS,IAAI,iQAAkB,CAAC;YAClC,aAAa;QACjB;QAEA,MAAM,YAAY,KAAK,GAAG;QAE1B,kCAAkC;QAClC,MAAM,UAAU;YACZ,OAAO;gBAAE,MAAM;YAAK;YACpB,OAAO;gBACH,cAAc;gBACd,MAAM;YAaV;YACA,aAAa;gBACT,eAAe;gBACf,cAAc;gBACd,OAAO;gBACP,cAAc;YAClB;QACJ;QAEA,qCAAqC;QACrC,MAAM,CAAC,SAAS,GAAG,MAAM,OAAO,gBAAgB,CAAC;QACjD,MAAM,UAAU,KAAK,GAAG;QAExB,QAAQ,GAAG,CAAC,CAAC,mCAAmC,EAAE,UAAU,UAAU,EAAE,CAAC;QAEzE,IAAI,CAAC,SAAS,YAAY,EAAE;YACxB,MAAM,IAAI,MAAM;QACpB;QAEA,kCAAkC;QAClC,MAAM,cAAc,OAAO,IAAI,CAAC,SAAS,YAAY;QACrD,MAAM,cAAc,YAAY,QAAQ,CAAC;QAEzC,QAAQ,GAAG,CAAC,CAAC,+BAA+B,EAAE,YAAY,MAAM,CAAC,MAAM,CAAC;QAExE,OAAO,uMAAY,CAAC,IAAI,CAAC;YACrB,cAAc;YACd,UAAU;QACd;IAEJ,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO,uMAAY,CAAC,IAAI,CAAC;YACrB,OAAO;YACP,SAAS,MAAM,OAAO;QAC1B,GAAG;YAAE,QAAQ;QAAI;IACrB;AACJ"}}]
}